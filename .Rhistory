pull(mean)
Malaria_2013 <- as.numeric(Malaria_2013)
HIV_t_test <- t.test(
x = HIV_2002,
y = HIV_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
HIV_t_test
TB_t_test <- t.test(
x = TB_2002,
y = TB_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
TB_t_test
Malaria_t_test <- t.test(
x = Malaria_2002,
y = Malaria_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
Malaria_t_test
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
ggplot(summary_data, aes(x = condition, y = sum_value, fill = factor(year))) +
geom_bar(stat = "identity", position = "dodge") +
scale_fill_manual(values = c("2002" = "cornflowerblue", "2013" = "darkslategray1")) +
labs(
title = "Sum of Deaths for HIV, Malaria, and TB (2002 vs. 2013)",
x = "Disease",
y = "Sum of Deaths",
fill = "Year"
) +
theme_minimal()
library(dplyr)
library(ggplot2)
library(sqldf)
library(tidyr)
library(infer)
library(countrycode)
library(gt)
data <- read.csv("data/life_expectancy.csv")
# 2019 life expectancy
LE_2019 <- data %>%
select(location_name, val, year) %>%
filter(year == 2019) %>%
arrange(val)
# 2002 life expectancy
LE_2002 <- data %>%
select(location_name, val, year) %>%
filter(year == 2002) %>%
arrange(val)
library(dplyr)
library(ggplot2)
library(sqldf)
library(tidyr)
library(infer)
library(countrycode)
library(gt)
data <- read.csv("data/life_expectancy.csv")
# 2019 life expectancy
LE_2019 <- data %>%
select(location_name, val, year) %>%
filter(year == 2019) %>%
arrange(val)
# 2002 life expectancy
LE_2002 <- data %>%
select(location_name, val, year) %>%
filter(year == 2002) %>%
arrange(val)
# Combines the data and orders by 2002 LE
combined <- sqldf("SELECT a.location_name as Country,a.val as Life_Expectancy_2002,
b.val as Life_Expectancy_2019
FROM LE_2002 as a
JOIN LE_2019 as b
WHERE a.location_name = b.location_name
ORDER BY a.val ASC;
")
# Locks the countries so that ggplot can't auto arrange it
combined$Country <- factor(combined$Country, levels = combined$Country)
# Splits LE in 2002 and 2019 into two rows instead of columns
combined_long <- combined %>%
pivot_longer(cols = starts_with("Life_Expectancy"),
names_to = "Year",
values_to = "Life_Expectancy") %>%
mutate(Year = gsub("Life_Expectancy_", "", Year))
# Plots the LE sorted by 2002 LE
combined_long %>%
ggplot(aes(x = Country, y = Life_Expectancy, group = Year, color = Year)) +
geom_line() +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.ticks.x = element_blank()
) +
scale_color_manual(values = c("2002" = "red", "2019" = "blue")) +
labs(color = "Year", y = "Life Expectancy",
x = "Countries sorted by 2002 Life Expectancy",
title = "Life Expectancy of Countries in 2002 and 2019")
# This creates the matrix for the table, each represents a column in the table
dis_tab <- data.frame(
"Column_1"= c("Low-income countries","India","Lower-middle-income countries","China","Upper-middle class-income countries","High-income countries","Global"),
"Total" = c(7.66, 6.96, 4.56, 5.59, 2.26, 2.61, 5.48),
"HIV, malaria, and TB" = c(2.56, 0.93, 0.44, 0.10, 0.15, 0.05, 0.86),
"HIV" = c(1.40, 0.22, 0.28, -0.02, 0.10, 0.04, 0.42),
"Malaria" = c(0.50, 0.12, 0.01, 0.00, 0.00, 0.00, 0.14),
"TB" = c(0.66, 0.59, 0.15, 0.12, 0.05, 0.02, 0.31),
"HIV, malaria and TB Share of Total Gain Percent" = c(33.4, 13.4, 9.6, 1.8, 6.9, 2.1, 15.8),
"Population Share Percent" = c(22.9, 17.1, 18.3, 21.1, 5.3, 15.4, 100.0)
)
# Created two separate tables, combining proved to be complex
dis_tab2 <- data.frame(
"Column_1_1" = c("Low-income countries (excl. India)", "Low-income countries (incl. India)"),
"Total" = c(32.0, 53.8),
"HIV, malaria, and TB" = c(67.9, 86.4),
"HIV" = c(76.9, 86.0),
"Malaria" = c(84.0, 99.1),
"TB" = c(48.8, 81.4)
)
# This removes the unwanted periods from the column titles
names(dis_tab) <- gsub("\\.", " ", names(dis_tab))
names(dis_tab2) <- gsub("\\.", " ", names(dis_tab2))
# Create the formatted table using gt, and wanted to leave the first column empty like for reproducibility purposes
dis_table <- gt(dis_tab) %>%
tab_header(
title = "Gain in life expectancy (years)"
) %>%
cols_label(
"Column_1" = ""
) %>%
tab_source_note(
source_note = "Source: Countries Grouped by Income (2002 World Bank classification)"
)
dis_table2 <- gt(dis_tab2) %>%
tab_header(
title = "Share of gains accruing in low-income countries and India (percent)"
) %>%
cols_label(
"Column_1_1" = ""
) %>%
tab_source_note(
source_note = "Source: Countries Grouped by Income (2002 World Bank classification)"
)
# This prints the tables for viewing
dis_table
dis_table2
HIV_TB <- read.csv("data/HIV_TB_INCIDENCE_PREVALENCE_DEATHS.csv")
Malaria <- read.csv("data/MALARIA_INCIDENCE_DEATHS.csv")
valid_iso3 <- unique(countrycode::codelist$iso3c)
HIV_TB_filtered <- HIV_TB %>%
filter(age_group_name == "All Ages") %>%
filter(location_code %in% valid_iso3) %>%
filter(metric == "Deaths") %>%
filter(unit == "Number") %>%
filter(sex_name == "Both sexes") %>%
filter(year >= 2002)
Malaria_filtered <- Malaria %>%
filter(age_group_name == "All Ages") %>%
filter(location_code %in% valid_iso3) %>%
filter(metric == "Deaths") %>%
filter(unit == "Number") %>%
filter(sex_name == "Both sexes") %>%
filter(year >= 2002)
HIV_2002 <- HIV_TB_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "HIV/AIDS") %>%
pull(mean)
HIV_2002 <- as.numeric(HIV_2002)
HIV_2013 <- HIV_TB_filtered %>%
filter(year == 2013) %>%
filter(cause_name == "HIV/AIDS") %>%
pull(mean)
HIV_2013 <- as.numeric(HIV_2013)
TB_2002 <- HIV_TB_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "Tuberculosis") %>%
pull(mean)
TB_2002 <- as.numeric(TB_2002)
TB_2013 <- HIV_TB_filtered %>%
filter(cause_name == "Tuberculosis") %>%
filter(year == 2013) %>%
pull(mean)
TB_2013 <- as.numeric(TB_2013)
Malaria_2002 <- Malaria_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "Malaria") %>%
pull(mean)
Malaria_2002 <- as.numeric(Malaria_2002)
Malaria_2013 <- Malaria_filtered %>%
filter(cause_name == "Malaria") %>%
filter(year == 2013) %>%
pull(mean)
Malaria_2013 <- as.numeric(Malaria_2013)
HIV_t_test <- t.test(
x = HIV_2002,
y = HIV_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
HIV_t_test
TB_t_test <- t.test(
x = TB_2002,
y = TB_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
TB_t_test
Malaria_t_test <- t.test(
x = Malaria_2002,
y = Malaria_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
Malaria_t_test
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
ggplot(summary_data, aes(x = condition, y = sum_value, fill = factor(year))) +
geom_bar(stat = "identity", position = "dodge") +
scale_fill_manual(values = c("2002" = "cornflowerblue", "2013" = "darkslategray1")) +
labs(
title = "Sum of Deaths for HIV, Malaria, and TB (2002 vs. 2013)",
x = "Disease",
y = "Sum of Deaths",
fill = "Year"
) +
theme_minimal()
View(TB_t_test)
View(summary_data)
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
library(dplyr)
library(ggplot2)
library(sqldf)
library(tidyr)
library(infer)
library(countrycode)
library(gt)
data <- read.csv("data/life_expectancy.csv")
# 2019 life expectancy
LE_2019 <- data %>%
select(location_name, val, year) %>%
filter(year == 2019) %>%
arrange(val)
# 2002 life expectancy
LE_2002 <- data %>%
select(location_name, val, year) %>%
filter(year == 2002) %>%
arrange(val)
# Combines the data and orders by 2002 LE
combined <- sqldf("SELECT a.location_name as Country,a.val as Life_Expectancy_2002,
b.val as Life_Expectancy_2019
FROM LE_2002 as a
JOIN LE_2019 as b
WHERE a.location_name = b.location_name
ORDER BY a.val ASC;
")
# Locks the countries so that ggplot can't auto arrange it
combined$Country <- factor(combined$Country, levels = combined$Country)
# Splits LE in 2002 and 2019 into two rows instead of columns
combined_long <- combined %>%
pivot_longer(cols = starts_with("Life_Expectancy"),
names_to = "Year",
values_to = "Life_Expectancy") %>%
mutate(Year = gsub("Life_Expectancy_", "", Year))
# Plots the LE sorted by 2002 LE
combined_long %>%
ggplot(aes(x = Country, y = Life_Expectancy, group = Year, color = Year)) +
geom_line() +
theme_minimal() +
theme(
axis.text.x = element_blank(),
axis.ticks.x = element_blank()
) +
scale_color_manual(values = c("2002" = "red", "2019" = "blue")) +
labs(color = "Year", y = "Life Expectancy",
x = "Countries sorted by 2002 Life Expectancy",
title = "Life Expectancy of Countries in 2002 and 2019")
# This creates the matrix for the table, each represents a column in the table
dis_tab <- data.frame(
"Column_1"= c("Low-income countries","India","Lower-middle-income countries","China","Upper-middle class-income countries","High-income countries","Global"),
"Total" = c(7.66, 6.96, 4.56, 5.59, 2.26, 2.61, 5.48),
"HIV, malaria, and TB" = c(2.56, 0.93, 0.44, 0.10, 0.15, 0.05, 0.86),
"HIV" = c(1.40, 0.22, 0.28, -0.02, 0.10, 0.04, 0.42),
"Malaria" = c(0.50, 0.12, 0.01, 0.00, 0.00, 0.00, 0.14),
"TB" = c(0.66, 0.59, 0.15, 0.12, 0.05, 0.02, 0.31),
"HIV, malaria and TB Share of Total Gain Percent" = c(33.4, 13.4, 9.6, 1.8, 6.9, 2.1, 15.8),
"Population Share Percent" = c(22.9, 17.1, 18.3, 21.1, 5.3, 15.4, 100.0)
)
# Created two separate tables, combining proved to be complex
dis_tab2 <- data.frame(
"Column_1_1" = c("Low-income countries (excl. India)", "Low-income countries (incl. India)"),
"Total" = c(32.0, 53.8),
"HIV, malaria, and TB" = c(67.9, 86.4),
"HIV" = c(76.9, 86.0),
"Malaria" = c(84.0, 99.1),
"TB" = c(48.8, 81.4)
)
# This removes the unwanted periods from the column titles
names(dis_tab) <- gsub("\\.", " ", names(dis_tab))
names(dis_tab2) <- gsub("\\.", " ", names(dis_tab2))
# Create the formatted table using gt, and wanted to leave the first column empty like for reproducibility purposes
dis_table <- gt(dis_tab) %>%
tab_header(
title = "Gain in life expectancy (years)"
) %>%
cols_label(
"Column_1" = ""
) %>%
tab_source_note(
source_note = "Source: Countries Grouped by Income (2002 World Bank classification)"
)
dis_table2 <- gt(dis_tab2) %>%
tab_header(
title = "Share of gains accruing in low-income countries and India (percent)"
) %>%
cols_label(
"Column_1_1" = ""
) %>%
tab_source_note(
source_note = "Source: Countries Grouped by Income (2002 World Bank classification)"
)
# This prints the tables for viewing
dis_table
dis_table2
HIV_TB <- read.csv("data/HIV_TB_INCIDENCE_PREVALENCE_DEATHS.csv")
Malaria <- read.csv("data/MALARIA_INCIDENCE_DEATHS.csv")
valid_iso3 <- unique(countrycode::codelist$iso3c)
HIV_TB_filtered <- HIV_TB %>%
filter(age_group_name == "All Ages") %>%
filter(location_code %in% valid_iso3) %>%
filter(metric == "Deaths") %>%
filter(unit == "Number") %>%
filter(sex_name == "Both sexes") %>%
filter(year >= 2002)
Malaria_filtered <- Malaria %>%
filter(age_group_name == "All Ages") %>%
filter(location_code %in% valid_iso3) %>%
filter(metric == "Deaths") %>%
filter(unit == "Number") %>%
filter(sex_name == "Both sexes") %>%
filter(year >= 2002)
HIV_2002 <- HIV_TB_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "HIV/AIDS") %>%
pull(mean)
HIV_2002 <- as.numeric(HIV_2002)
HIV_2013 <- HIV_TB_filtered %>%
filter(year == 2013) %>%
filter(cause_name == "HIV/AIDS") %>%
pull(mean)
HIV_2013 <- as.numeric(HIV_2013)
TB_2002 <- HIV_TB_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "Tuberculosis") %>%
pull(mean)
TB_2002 <- as.numeric(TB_2002)
TB_2013 <- HIV_TB_filtered %>%
filter(cause_name == "Tuberculosis") %>%
filter(year == 2013) %>%
pull(mean)
TB_2013 <- as.numeric(TB_2013)
Malaria_2002 <- Malaria_filtered %>%
filter(year == 2002) %>%
filter(cause_name == "Malaria") %>%
pull(mean)
Malaria_2002 <- as.numeric(Malaria_2002)
Malaria_2013 <- Malaria_filtered %>%
filter(cause_name == "Malaria") %>%
filter(year == 2013) %>%
pull(mean)
Malaria_2013 <- as.numeric(Malaria_2013)
HIV_t_test <- t.test(
x = HIV_2002,
y = HIV_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
HIV_t_test
TB_t_test <- t.test(
x = TB_2002,
y = TB_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
TB_t_test
Malaria_t_test <- t.test(
x = Malaria_2002,
y = Malaria_2013,
alternative = "two.sided",
paired = TRUE,
conf.level = 0.95
)
Malaria_t_test
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
ggplot(summary_data, aes(x = condition, y = sum_value, fill = factor(year))) +
geom_bar(stat = "identity", position = "dodge") +
scale_fill_manual(values = c("2002" = "cornflowerblue", "2013" = "darkslategray1")) +
labs(
title = "Sum of Deaths for HIV, Malaria, and TB (2002 vs. 2013)",
x = "Disease",
y = "Sum of Deaths",
fill = "Year"
) +
theme_minimal()
HIV_2002_sum <- sum(HIV_2002)
HIV_2013_sum <- sum(HIV_2013)
Malaria_2002_sum <- sum(Malaria_2002)
Malaria_2013_sum <- sum(Malaria_2013)
TB_2002_sum <- sum(TB_2002)
TB_2013_sum <- sum(TB_2013)
summary_data <- data.frame(
condition = rep(c("HIV", "Malaria", "TB"), each = 2),
year = rep(c(2002, 2013), times = 3),
sum_value = c(HIV_2002_sum, HIV_2013_sum, Malaria_2002_sum, Malaria_2013_sum, TB_2002_sum, TB_2013_sum)
)
print(summary_data)
library(dplyr)
library(ggplot2)
library(sqldf)
library(tidyr)
library(infer)
library(countrycode)
library(gt)
data <- read.csv("data/life_expectancy.csv")
# 2019 life expectancy
LE_2019 <- data %>%
select(location_name, val, year) %>%
filter(year == 2019) %>%
arrange(val)
# 2002 life expectancy
LE_2002 <- data %>%
select(location_name, val, year) %>%
filter(year == 2002) %>%
arrange(val)
# Combines the data and orders by 2002 LE
combined <- sqldf("SELECT a.location_name as Country,a.val as Life_Expectancy_2002,
b.val as Life_Expectancy_2019
FROM LE_2002 as a
JOIN LE_2019 as b
WHERE a.location_name = b.location_name
ORDER BY a.val ASC;
")
# Locks the countries so that ggplot can't auto arrange it
combined$Country <- factor(combined$Country, levels = combined$Country)
# Splits LE in 2002 and 2019 into two rows instead of columns
combined_long <- combined %>%
pivot_longer(cols = starts_with("Life_Expectancy"),
names_to = "Year",
values_to = "Life_Expectancy") %>%
mutate(Year = gsub("Life_Expectancy_", "", Year))
